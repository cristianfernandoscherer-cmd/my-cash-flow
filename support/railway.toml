# ============================================
# Configuração do serviço support
# ============================================

[build]
builder = "DOCKERFILE"
dockerfilePath = "./Dockerfile"

[deploy]
# Comando de inicialização
startCommand = "uvicorn app:app --host 0.0.0.0 --port $PORT"

# Health checks
healthcheckPath = "/health"
healthcheckTimeout = 100

# Política de reinicialização
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Watch patterns - só faz deploy se mudar arquivos no support/
[deploy.watch]
patterns = [
  "/support/**/*.py",
  "/support/Dockerfile",
  "/support/requirements.txt"
]